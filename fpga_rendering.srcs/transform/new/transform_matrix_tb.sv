`default_nettype none
`timescale 1ns / 1ps

import Utils::mat4f;

module transform_matrix_tb ();

    logic clk;

    mat4f mat_world, mat_proj;
    mat4f mat_tr;

    // Start matrix transform flag
    logic mtr_start;
    // Matrix transform busy and done flags
    logic mtr_busy, mtr_done;

    transform_matrix vt (
        .clk,
        .start(mtr_start),
        .mat_world,
        .mat_proj,
        .mat_tr,
        .busy(mtr_busy),
        .done(mtr_done)
    );

    initial begin
        clk = 0;
        forever begin
            #5 clk = ~clk;
        end
    end

//    initial begin
//        #100 $finish;
//    end

    initial begin
        mat_world = {
            32'b0000000000000001_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 
            32'b0000000000000000_0000000000000000, 32'b0000000000000001_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 
            32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000001_0000000000000000, 32'b0000000000000000_0000000000000000, 
            32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000001_0000000000000000
        };

        mat_proj = {
            32'b0000000000000001_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 
            32'b0000000000000000_0000000000000000, 32'b0000000000000001_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 
            32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b1111111111111110_1111101111101111, 32'b1111111111111111_0000000000000000, 
            32'b0000000000000000_0000000000000000, 32'b0000000000000000_0000000000000000, 32'b1111111111111111_1011111011111011, 32'b0000000000000000_0000000000000000
        };

        mtr_start = 1'b1;

        #10

        mtr_start = 1'b0;
    end

endmodule
